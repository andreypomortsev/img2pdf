# Сервис для конвертации изображений в PDF

Веб-сервис, который конвертирует изображения в PDF-файлы и объединяет несколько PDF в один документ. Он использует бэкенд на FastAPI с Celery для асинхронной обработки задач, все работает в Docker-контейнерах.

## Возможности

- **Асинхронная конвертация изображений в PDF**: Загрузите изображение, и оно будет преобразовано в PDF в фоновом режиме.
- **Асинхронное объединение PDF**: Объединяйте несколько PDF-файлов в один документ.
- **Отслеживание статуса задач**: Следите за состоянием любой фоновой задачи (конвертация или объединение).
- **Контейнеризация**: Весь стек приложения управляется с помощью Docker и Docker Compose для легкой настройки и развертывания.

## Технологический стек

- **Бэкенд**: FastAPI
- **Асинхронные задачи**: Celery
- **Брокер сообщений**: Redis
- **База данных**: PostgreSQL с SQLAlchemy ORM
- **Обработка изображений**: Pillow, img2pdf
- **Манипуляции с PDF**: PyPDF2
- **Контейнеризация**: Docker, Docker Compose

## Начало работы

### Требования

- Docker
- Docker Compose

### Запуск приложения

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/andreypomortsev/imgtopdf.git
    cd imgtopdf
    ```

2.  **Соберите и запустите сервисы:**
    ```bash
    docker compose up --build -d
    ```

3.  Приложение будет запущено и доступно по адресу `http://localhost:8000`.

## API Endpoints

#### Загрузка изображения

- **URL**: `/api/v1/files/upload-image/`
- **Метод**: `POST`
- **Данные формы**: `file` (файл изображения для конвертации)
- **Успешный ответ**:
  ```json
  {
    "task_id": "<ваш-task-id>"
  }
  ```

#### Проверка статуса задачи

- **URL**: `/api/v1/files/tasks/{task_id}`
- **Метод**: `GET`
- **Успешный ответ**:
  ```json
  {
    "task_id": "<ваш-task-id>",
    "task_status": "SUCCESS",
    "task_result": "static/files/ваш_файл.pdf"
  }
  ```

#### Объединение PDF

- **URL**: `/api/v1/pdfs/merge/`
- **Метод**: `POST`
- **Тело запроса**:
  ```json
  {
    "file_ids": [1, 2],
    "output_filename": "merged.pdf"
  }
  ```
- **Успешный ответ**:
  ```json
  {
    "task_id": "<ваш-task-id>"
  }
  ```

## Лицензия

Этот проект лицензирован под лицензией MIT - подробности см. в файле [LICENSE](LICENSE).
